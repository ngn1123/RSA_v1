{% load i18n menu_tags cache %}

{% for child in children %}
	<!-- child.ancestor checks if the child is ancestor of currently selected node -->
    {% if child.children and child.selected or child.ancestor %}
    	<ul class="list-group">
    	{% for grandchild in child.children %}
		    <li class="list-group-item {% if grandchild.selected %} active{% endif %}" onclick="window.open('{{ grandchild.get_absolute_url }}', '_self');" style="cursor:pointer">
		    	{{ grandchild.get_menu_title }}
		    </li>
	    {% endfor %}
	    </ul>    
    	
    {% endif %}

{% if class and forloop.last and not forloop.parentloop %}
{% endif %}
{% endfor %}
